AquÃ­ van instrucciones claras para el dev para corregir el problema que detectaste
(keywords con capability alta cayendo en Review por el â€œcategory fenceâ€), y ademÃ¡s dejarlo
listo como SPEC 3.1.
âœ… SPEC 3.1 â€” Keyword Gap Lite (Fix de Fence Override)
1) Problema actual
Keywords como clogs women , tan clogs , luxury clogs tienen:
capability = 0.75 (75%)
PERO estÃ¡n en Review porque:
fenceCheck = false â†’ â€œOutside category fence - needs reviewâ€
ğŸ“Œ Hoy el cÃ³digo estÃ¡ haciendo esto:
â¡ï¸ Esto estÃ¡ produciendo que keywords potencialmente muy relevantes se queden en
Review aunque el scoring las marque como ganables.
2) Nuevo comportamiento (Spec 3.1)
âœ… Regla nueva:
Capability manda. Fence solo flaggea.
El sistema debe clasificar asÃ­:
âœ… PASS
capabilityScore >= pass_threshold
aunque el keyword estÃ© fuera del fence
pero debe quedar marcado como:
flags: ["outside_fence"]
reason: "Strong capability fit, outside fence"
âš ï¸ REVIEW
âœ… Objetivo de Spec 3.1:
El â€œcategory fenceâ€ NO debe anular el capability score.
Debe funcionar como warning / flag, no como downgrade automÃ¡tico.
ts
if (!fenceCheck.inFence) {
status = "review";
}
1/4
review_threshold <= capabilityScore < pass_threshold
independiente del fence (pero fence puede sumar flags)
ğŸ’¤ OUT_OF_PLAY
capabilityScore < review_threshold
o si entra en â€œcompetitor_brandâ€
o si entra en â€œvariant_or_sizeâ€
3) Reglas exactas para implementar
Thresholds
pass_threshold por preset (ej: DTC footwear = 0.55)
review_threshold = 0.30
4) Nueva lÃ³gica de evaluaciÃ³n (pseudocÃ³digo)
ts
const fence = fenceCheck(keyword, config);
const capability = computeCapabilityScore(keyword, config);
const flags = [];
if (!fence.inFence) {
flags.push("outside_fence");
}
if (isCompetitorBrand(keyword, config)) {
return outOfPlay("competitor_brand", flags);
}
if (intentType === "variant_or_size") {
return outOfPlay("variant_or_size", flags);
}
if (capability < review_threshold) {
return outOfPlay("low_capability", flags);
}
if (capability < pass_threshold) {
return review("medium_capability", flags);
}
2/4
5) Output esperado (nuevo)
Ejemplo keyword: clogs women
âœ… Antes:
Status: Review
Reason: â€œOutside category fence - needs reviewâ€
âœ… Ahora:
Status: Pass
Flags: ["outside_fence"]
Reason: "Strong capability fit â€” verify category alignment"
6) UI: cÃ³mo mostrarlo para claridad
En la tabla de â€œTop Opportunitiesâ€:
Agregar un pequeÃ±o badge de warning:
âš ï¸ Outside Fence
tooltip: â€œStrong keyword opportunity, but not included in current category scope.â€
Esto permite:
âœ… que el usuario lo vea como high priority
pero entienda el riesgo / validaciÃ³n necesaria.
7) Bonus: Fence Override band (opcional)
Si quieren un control mÃ¡s fino:
fence_override_threshold
ej: 0.70
ğŸ“Œ Regla:
Si capability >= fence_override_threshold , pasa aunque estÃ© fuera del fence.
Si no, queda en Review.
Pero para Spec 3.1 recomiendo la versiÃ³n simple:
âœ… capability manda siempre, fence solo flaggea.
âœ… SPEC 3.1 â€” Definition of Done (Checklist)
// capability >= pass_threshold
return pass("strong_capability", flags);
3/4
âœ… Keywords con capability > pass_threshold deben caer en Pass aunque estÃ©n fuera del
fence
âœ… En Pass deben incluir flags: ["outside_fence"] cuando aplique
âœ… UI debe mostrar badge â€œOutside Fenceâ€ en Top Opportunities
âœ… Unit tests:
capability = 0.75 + outside fence â†’ Pass
capability = 0.45 + outside fence â†’ Review
capability = 0.20 â†’ Out of Play
competitor brand â†’ Out of Play
ğŸ“Œ Impacto
Este cambio resuelve 2 problemas de negocio:
1. No perdemos oportunidades reales solo porque el UCR no estÃ¡ perfecto todavÃ­a
2. El sistema se siente mÃ¡s â€œinteligenteâ€ y menos â€œrÃ­gidoâ€
Si querÃ©s, puedo escribirte el bloque exacto de evaluateKeyword() ya en TypeScript listo
para copiar/pegar al repo (con flags, reason, y logs de debug).
4/4