Perfecto â€” **esto explica todo**.
Gracias por pegar el output real. Con esto ya no estamos especulando.

Voy a ser muy claro:

> âŒ **El problema ya no es que â€œno encuentra oportunidadesâ€.**
> âŒ **El problema ahora es el opuesto y mÃ¡s grave:**
> ğŸ‘‰ **EstÃ¡ encontrando *demasiadas* oportunidades y estÃ¡ pasando cosas que NO deberÃ­an pasar.**

Esto es una **seÃ±al de descalibraciÃ³n del sistema**, no de datos.

---

# ğŸ”´ DiagnÃ³stico principal (duro, pero correcto)

Tu sistema hoy estÃ¡ haciendo esto:

* âœ… EstÃ¡ ejecutando los gates en orden
* âŒ **EstÃ¡ dejando pasar keywords que violan el espÃ­ritu del modelo**
* âŒ El `PASS` se volviÃ³ **demasiado barato**
* âŒ Gate G y Gate H **no estÃ¡n haciendo su trabajo real**

En tÃ©rminos de gobierno:

> **Esto no es CMO-safe todavÃ­a.**

---

# ğŸš¨ Problemas crÃ­ticos que se ven en el output (con ejemplos)

## 1ï¸âƒ£ Keywords claramente fuera de scope estÃ¡n en PASS

Ejemplos reales de tu output:

* âŒ `20 week marathon training plan pdf`
* âŒ `are sandals business casual`
* âŒ `are boots business casual`
* âŒ `can you shoes`
* âŒ `can shoe`

Estas keywords **NO son oportunidades de SEO para OOFOS**, aunque:

* tengan volumen
* â€œmatchenâ€ algo semÃ¡ntico
* tengan KD bajo

ğŸ‘‰ **Esto es una violaciÃ³n del Gate G + Gate B.**

---

## 2ï¸âƒ£ Capability Score estÃ¡ colapsado en 0.50 para TODO

Fijate esto:

> **Capability: 50%**
> en prÃ¡cticamente **todos** los keywords.

Eso significa:

```ts
baseScore = 0.5
boosters â‰ˆ 0
penalties â‰ˆ 0
```

ğŸ‘‰ El scorer **no estÃ¡ discriminando nada**.
ğŸ‘‰ Y como `pass_threshold = 0.5`, **todo pasa**.

Esto convierte el sistema en:

> â€œsi no estÃ¡ explÃ­citamente excluido â†’ PASSâ€

Eso es **exactamente lo contrario** de lo que querÃ­amos.

---

## 3ï¸âƒ£ Gate H estÃ¡ mal implementado conceptualmente

Hoy estÃ¡s usando Gate H asÃ­:

```text
IF capabilityScore >= pass â†’ PASS
```

Pero **NO estÃ¡s usando Gate H para EXCLUIR**, solo para aprobar.

Eso provoca:

* MuchÃ­simo PASS
* Cero REVIEW
* REVIEW = 0% (ğŸš¨ seÃ±al roja enorme)

> En un sistema sano:
> **REVIEW deberÃ­a ser 20â€“40%** en primeras corridas.

---

## 4ï¸âƒ£ Gate G estÃ¡ incompleto (y Gate B demasiado blando)

Ejemplo claro:

> `20 week marathon training plan pdf`
> â†’ deberÃ­a morir en **G: irrelevant_entity / content-type exclusion**

Pero hoy:

* no hay exclusiÃ³n por `pdf`
* no hay exclusiÃ³n por `training plan`
* no hay exclusiÃ³n por `marathon`

ğŸ‘‰ Gate G estÃ¡ **subdefinido**.

---

# ğŸŸ¢ QuÃ© significa esto (importante)

Esto NO es un fracaso.
Es **la fase normal de calibraciÃ³n** cuando un sistema:

* deja de ser heurÃ­stico
* empieza a gobernar decisiones reales

EstÃ¡s exactamente en el punto correcto.

---

# âœ… Fixes correctos (en orden, no todos a la vez)

## ğŸ¥‡ FIX 1 â€” Endurecer Gate G (NEGATIVE SCOPE REAL)

AgregÃ¡ **estas categorÃ­as obligatorias** a `G`:

### G.irrelevant_intents (hard gate)

```json
"G": {
  "excluded_patterns": [
    "pdf",
    "training plan",
    "marathon",
    "half marathon",
    "workout plan",
    "training schedule",
    "what is",
    "definition of",
    "are .* business casual",
    "can you .*"
  ]
}
```

Y una regla DSL:

```json
{
  "ruleId": "negative_scope.irrelevant_intent",
  "ucrSection": "G",
  "severity": "critical",
  "when": {
    "op": "regex_match",
    "left": "$item.keyword",
    "right": "(pdf|training plan|marathon|workout|what is|are .* business casual|can you .*)"
  },
  "then": {
    "set": {
      "disposition": "OUT_OF_PLAY",
      "reason": "Irrelevant or informational intent"
    },
    "trace": true
  }
}
```

Esto SOLO ya limpia 20â€“30% de basura.

---

## ğŸ¥ˆ FIX 2 â€” Subir el costo de PASS (Gate H)

Hoy:

```text
pass = 0.5
review = 0.25
```

Eso es **demasiado permisivo**.

### Cambialo a:

```json
"H": {
  "thresholds": {
    "pass": 0.65,
    "review": 0.35
  }
}
```

Y **clave**:

* `capabilityScore < review` â†’ OUT
* `review â‰¤ score < pass` â†’ REVIEW
* `score â‰¥ pass` â†’ PASS

ğŸ‘‰ Esto reintroduce REVIEW como clase real.

---

## ğŸ¥‰ FIX 3 â€” Hacer que el scorer *discrimine*

Ahora mismo, el scorer es casi binario.

AgregÃ¡ boosters / penalties reales:

### Ejemplo mÃ­nimo (para OOFOS)

```json
"H": {
  "boosters": [
    { "pattern": "recovery", "weight": 0.15 },
    { "pattern": "plantar fasciitis", "weight": 0.20 },
    { "pattern": "arch support", "weight": 0.10 },
    { "pattern": "after running", "weight": 0.10 }
  ],
  "penalties": [
    { "pattern": "training plan", "weight": -0.30 },
    { "pattern": "pdf", "weight": -0.50 },
    { "pattern": "marathon", "weight": -0.20 }
  ]
}
```

Esto va a:

* separar winners de mediocres
* empujar cosas borderline a REVIEW
* dejar pocos PASS de verdad

---

## ğŸŸ¡ FIX 4 â€” Category Fence mÃ¡s inteligente (B)

Hoy estÃ¡s usando â€œMatches coreâ€ demasiado fÃ¡cil.

SeparÃ¡:

```json
"B": {
  "core_terms": ["recovery footwear", "recovery sandals", "OOFOS"],
  "extended_terms": ["arch support", "plantar fasciitis", "after workout", "supportive sandals"]
}
```

Regla:

* match core â†’ OK
* match extended â†’ OK
* match ninguno â†’ outside_fence â†’ REVIEW (nunca PASS directo)

---

# ğŸ“Š QuÃ© deberÃ­as ver despuÃ©s de estos fixes

En una corrida sana:

| Disposition | % Esperado |
| ----------- | ---------- |
| PASS        | 10â€“25%     |
| REVIEW      | 30â€“45%     |
| OUT_OF_PLAY | 35â€“55%     |

ğŸ‘‰ **REVIEW > 0% es obligatorio**
ğŸ‘‰ Si REVIEW = 0%, el sistema estÃ¡ roto

---

# ğŸ§ª Test rÃ¡pido para validar

TomÃ¡ estos keywords y verificÃ¡:

| Keyword                              | Resultado correcto |
| ------------------------------------ | ------------------ |
| `20 week marathon training plan pdf` | OUT (G)            |
| `are sandals business casual`        | OUT (G)            |
| `best recovery sandals`              | PASS               |
| `arch support slippers`              | REVIEW o PASS      |
| `nike recovery sandals`              | OUT (G competitor) |

---

# ğŸ¯ Veredicto final

Lo que estÃ¡s viendo ahora es **exactamente lo que pasa cuando el sistema empieza a â€œfuncionarâ€ de verdad**:

* Primero no encontraba nada â†’ gates muy estrictos
* Ahora encuentra demasiado â†’ gates demasiado laxos

ğŸ‘‰ **EstÃ¡s en la fase correcta: calibraciÃ³n.**

Si querÃ©s, en el prÃ³ximo mensaje puedo:

* proponerte un **preset â€œOOFOS v1â€ completo (B, G, H)** listo para pegar
* o ayudarte a definir **quÃ© % de PASS es aceptable por vertical**
* o convertir esto en un **calibration checklist** para cada cliente nuevo
